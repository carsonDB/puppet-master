<html>
<head>
<style type="text/css">
	#box {position: absolute;}
	#container { background-color: #00eeff;}
	.button {position: absolute; background-color: red; width: 20px; height: 20px; border-radius:25px;}
</style>
</head>
<body>
<div id = 'box'>
	<div class = 'button'></div>
	<div class = 'button'></div>
	<div class = 'button'></div>
	<div class = 'button'></div>
	<div id = 'container'>123</div>
</div>

<script type="text/javascript">
	// get native-dom (need to be changed)
	var buttons = document.getElementsByClassName('button');
	var container = document.getElementById('container');
	var box = document.getElementById('box');

	var offsetLeft = container.offsetLeft;
	var offsetTop = container.offsetTop;
	var offsetWidth = container.offsetWidth;
	var offsetHeight = container.offsetHeight;
	buttons[0].style.left = offsetLeft - 10 + 'px';
	buttons[0].style.top = offsetTop - 10 + 'px';
	buttons[1].style.left = offsetLeft + offsetWidth - 10 + 'px';
	buttons[1].style.top = offsetTop - 10 + 'px';
	buttons[2].style.left = offsetLeft - 10 + 'px';
	buttons[2].style.top = offsetTop + offsetHeight - 10 + 'px';
	buttons[3].style.left = offsetLeft + offsetWidth - 10 + 'px';
	buttons[3].style.top = offsetTop + offsetHeight - 10 + 'px';

	var moveBox = {
		dom: container,
		state: 'fix',
		left: box.offsetLeft, top: box.offsetTop,
		init() {
			var dom = this.dom;
			dom.addEventListener('mousedown', (e) => {
				moveBox.state = 'move';
				moveBox.left = e.clientX, moveBox.top = e.clientY;
			});
			document.addEventListener('mouseup', () => {
				moveBox.state = 'fix';
			});
			document.addEventListener('mousemove', (e) => {
				if (moveBox.state == 'move')
				{
					box.style.left = box.offsetLeft + e.clientX - moveBox.left + 'px';
					box.style.top = box.offsetTop + e.clientY - moveBox.top + 'px';
					moveBox.left = e.clientX;
					moveBox.top = e.clientY;
				}
			});
		}
	}
	moveBox.init();

	// move-button constructor
	function moveButton (dom, index, buttons) {
		this.left = dom.offsetLeft;
		this.top = dom.offsetTop;
		this.state = 'fix';
		var self = this;
		dom.addEventListener('mousedown', (e) => {
			self.state = 'move';
			self.left = e.clientX, self.top = e.clientY;
		});
		document.addEventListener('mouseup', (e) => {
			self.state = 'fix';
		});
		document.addEventListener('mousemove', (e) => {
			if (self.state != 'move')
				return;
			var offsetLeft = e.clientX - self.left;
			var offsetTop = e.clientY - self.top;
			// dom.style.left = dom.offsetLeft + offsetLeft + 'px';
			// dom.style.top = dom.offsetTop + offsetTop + 'px';
			if (index == 0)
			{
				box.style.left = box.offsetLeft + offsetLeft + 'px';
				container.style.width = container.offsetWidth - offsetLeft + 'px';
				box.style.top = box.offsetTop + offsetTop + 'px';
				container.style.height = container.offsetHeight - offsetTop + 'px';
			}
			else if (index == 1)
			{
				container.style.width = container.offsetWidth + offsetLeft + 'px';
				box.style.top = box.offsetTop + offsetTop + 'px';
				container.style.height = container.offsetHeight - offsetTop + 'px';
			}
			else if (index == 2)
			{
				box.style.left = box.offsetLeft + offsetLeft + 'px';
				container.style.width = container.offsetWidth - offsetLeft + 'px';
				container.style.height = container.offsetHeight + offsetTop + 'px';
			}
			else if (index == 3)
			{
				container.style.width = container.offsetWidth + offsetLeft + 'px';
				container.style.height = container.offsetHeight + offsetTop + 'px';
			}
			buttons[0].style.left = buttons[2].style.left = '-10px';
			buttons[0].style.top = buttons[1].style.top = '-10px';
			buttons[1].style.left = buttons[3].style.left = container.offsetWidth - 10 + 'px';
			buttons[2].style.top = buttons[3].style.top = container.offsetHeight - 10 + 'px';
			self.left = e.clientX;
			self.top = e.clientY;
		})
	}

	for (var i = 0; i < buttons.length; i++) {
		new moveButton(buttons[i], i, buttons);
	}
</script>